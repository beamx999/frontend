{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/STUDY/frontend/app/admin/users/page.js"],"sourcesContent":["'use client';\r\nimport Link from 'next/link'\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation'\r\n\r\nexport default function Page() {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [lastUpdate, setLastUpdate] = useState(null);\r\n  const router = useRouter();\r\n\r\n  // ฟังก์ชันเช็ค authentication\r\n  const checkAuth = () => {\r\n    try {\r\n      if (typeof window === 'undefined') return false;\r\n      \r\n      const token = sessionStorage.getItem('token');\r\n      if (!token) {\r\n        console.log('No token found, redirecting to login');\r\n        router.push('/Login');\r\n        return false;\r\n      }\r\n      \r\n      setIsAuthenticated(true);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error checking auth:', err);\r\n      router.push('/Login');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // ฟังก์ชันดึงข้อมูล users\r\n  const fetchUsers = async (showLoading = false) => {\r\n    try {\r\n      if (showLoading) setLoading(true);\r\n      setError(null);\r\n      \r\n      // เช็ค window object\r\n      if (typeof window === 'undefined') {\r\n        console.log('Window is undefined');\r\n        return;\r\n      }\r\n\r\n      // เช็ค internet connection\r\n      if (!navigator.onLine) {\r\n        throw new Error('No internet connection');\r\n      }\r\n\r\n      const token = sessionStorage.getItem('token');\r\n      if (!token) {\r\n        console.log('No token found during fetch');\r\n        router.push('/Login');\r\n        return;\r\n      }\r\n\r\n      console.log('Fetching users from API...');\r\n\r\n      // สร้าง AbortController สำหรับ timeout\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 10000);\r\n\r\n      const response = await fetch('https://backend-nextjs-virid.vercel.app/api/users', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n        },\r\n        signal: controller.signal,\r\n        cache: 'no-cache',\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      console.log('API Response status:', response.status);\r\n\r\n      // ตรวจสอบ authentication errors\r\n      if (response.status === 401 || response.status === 403) {\r\n        console.log('Authentication failed, clearing session');\r\n        sessionStorage.clear();\r\n        router.push('/Login');\r\n        return;\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Users data received:', data?.length || 0, 'items');\r\n\r\n      if (Array.isArray(data)) {\r\n        setItems(data);\r\n        setLastUpdate(new Date());\r\n      } else if (data && typeof data === 'object' && data.users) {\r\n        setItems(data.users);\r\n        setLastUpdate(new Date());\r\n      } else {\r\n        console.warn('Unexpected data format:', data);\r\n        setItems([]);\r\n        setLastUpdate(new Date());\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Error fetching users:', err);\r\n      setError(err.message);\r\n      \r\n      // จัดการ error types\r\n      if (err.name === 'AbortError') {\r\n        setError('Request timeout - server response too slow');\r\n      } else if (err.message.includes('Failed to fetch')) {\r\n        setError('Network error - cannot connect to server');\r\n      } else if (err.message.includes('No internet connection')) {\r\n        setError('No internet connection');\r\n      }\r\n      \r\n      // ถ้า error เกี่ยวกับ auth\r\n      if (err.message.includes('401') || err.message.includes('403')) {\r\n        sessionStorage.clear();\r\n        router.push('/Login');\r\n        return;\r\n      }\r\n\r\n    } finally {\r\n      if (showLoading) setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Effect แรก - ตรวจสอบ auth และโหลดข้อมูลครั้งแรก\r\n  useEffect(() => {\r\n    console.log('Component mounted, checking authentication...');\r\n    \r\n    if (checkAuth()) {\r\n      console.log('Authentication passed, fetching initial data...');\r\n      fetchUsers(true);\r\n    }\r\n  }, []);\r\n\r\n  // Effect ที่สอง - Auto refresh (แยกออกมา)\r\n  useEffect(() => {\r\n    if (!isAuthenticated) return;\r\n\r\n    console.log('Setting up auto-refresh...');\r\n    \r\n    const interval = setInterval(() => {\r\n      console.log('Auto-refresh triggered');\r\n      \r\n      // เช็คสถานะก่อนรีเฟรช\r\n      if (typeof window !== 'undefined' && navigator.onLine) {\r\n        const token = sessionStorage.getItem('token');\r\n        if (token) {\r\n          fetchUsers(false); // ไม่แสดง loading\r\n        } else {\r\n          console.log('No token in auto-refresh, redirecting');\r\n          clearInterval(interval);\r\n          router.push('/Login');\r\n        }\r\n      } else {\r\n        console.log('Offline or window undefined, skipping refresh');\r\n      }\r\n    }, 15000); // 15 วินาที\r\n\r\n    return () => {\r\n      console.log('Clearing auto-refresh interval');\r\n      clearInterval(interval);\r\n    };\r\n  }, [isAuthenticated]);\r\n\r\n  // ฟังก์ชันลบ user\r\n  const handleDelete = async (id) => {\r\n    if (!confirm('Are you sure you want to delete this user?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = sessionStorage.getItem('token');\r\n      if (!token) {\r\n        router.push('/Login');\r\n        return;\r\n      }\r\n\r\n      console.log('Deleting user ID:', id);\r\n\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 10000);\r\n\r\n      const response = await fetch(`https://backend-nextjs-virid.vercel.app/api/users/${id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        signal: controller.signal,\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (response.status === 401 || response.status === 403) {\r\n        sessionStorage.clear();\r\n        router.push('/Login');\r\n        return;\r\n      }\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to delete: HTTP ${response.status}`);\r\n      }\r\n\r\n      console.log('User deleted successfully');\r\n      alert('User deleted successfully!');\r\n      \r\n      // รีเฟรชข้อมูลหลังลบ\r\n      setTimeout(() => fetchUsers(false), 1000);\r\n      \r\n    } catch (err) {\r\n      console.error('Error deleting user:', err);\r\n      \r\n      if (err.name === 'AbortError') {\r\n        alert('Delete request timeout. Please try again.');\r\n      } else {\r\n        alert(`Failed to delete user: ${err.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  // แสดง loading screen\r\n  if (loading || !isAuthenticated) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '100vh',\r\n        background: 'linear-gradient(135deg, #1a1a1a 0%, #2d1b2d 50%, #1a1a1a 100%)',\r\n        color: '#ffffff'\r\n      }}>\r\n        <div style={{\r\n          textAlign: 'center',\r\n          padding: '40px',\r\n          background: 'rgba(0, 0, 0, 0.4)',\r\n          borderRadius: '15px',\r\n          backdropFilter: 'blur(10px)',\r\n          border: '2px solid rgba(220, 38, 38, 0.4)'\r\n        }}>\r\n          <div style={{\r\n            display: 'inline-block',\r\n            width: '40px',\r\n            height: '40px',\r\n            border: '4px solid #dc2626',\r\n            borderTop: '4px solid transparent',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite',\r\n            marginBottom: '20px'\r\n          }}></div>\r\n          <h2>Loading Users Management...</h2>\r\n          <p>Please wait while we authenticate and load data</p>\r\n          {error && (\r\n            <div style={{ \r\n              color: '#ff6b6b', \r\n              marginTop: '15px',\r\n              padding: '10px',\r\n              background: 'rgba(255, 107, 107, 0.1)',\r\n              borderRadius: '5px',\r\n              border: '1px solid rgba(255, 107, 107, 0.3)'\r\n            }}>\r\n              Error: {error}\r\n              <br />\r\n              <button \r\n                onClick={() => fetchUsers(true)}\r\n                style={{\r\n                  marginTop: '10px',\r\n                  padding: '8px 16px',\r\n                  background: '#dc2626',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '5px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Retry\r\n              </button>\r\n            </div>\r\n          )}\r\n          <style jsx>{`\r\n            @keyframes spin {\r\n              0% { transform: rotate(0deg); }\r\n              100% { transform: rotate(360deg); }\r\n            }\r\n          `}</style>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <style jsx>{`\r\n        body {\r\n          background: linear-gradient(135deg, #1a1a1a 0%, #2d1b2d 50%, #1a1a1a 100%);\r\n          min-height: 100vh;\r\n          color: #ffffff;\r\n          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n        }\r\n        \r\n        .container {\r\n          background: rgba(0, 0, 0, 0.4);\r\n          border-radius: 15px;\r\n          backdrop-filter: blur(10px);\r\n          box-shadow: 0 8px 32px rgba(220, 38, 38, 0.2);\r\n          padding: 25px;\r\n          margin: 0 auto;\r\n          max-width: 100%;\r\n          overflow-x: auto;\r\n        }\r\n        \r\n        .card {\r\n          background: linear-gradient(145deg, #2a2a2a, #1a1a1a);\r\n          border: 2px solid rgba(220, 38, 38, 0.4);\r\n          border-radius: 15px;\r\n          box-shadow: \r\n            0 4px 25px rgba(0, 0, 0, 0.6),\r\n            inset 0 1px 0 rgba(220, 38, 38, 0.2);\r\n          overflow: hidden;\r\n        }\r\n        \r\n        .card-header {\r\n          background: linear-gradient(90deg, #dc2626, #991b1b, #7f1d1d);\r\n          color: #ffffff;\r\n          font-size: 1.8rem;\r\n          font-weight: bold;\r\n          text-align: center;\r\n          padding: 20px;\r\n          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\r\n          border-bottom: 3px solid rgba(220, 38, 38, 0.6);\r\n          position: relative;\r\n        }\r\n        \r\n        .card-header::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: -100%;\r\n          width: 100%;\r\n          height: 100%;\r\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\r\n          animation: shine 3s infinite;\r\n        }\r\n        \r\n        @keyframes shine {\r\n          0% { left: -100%; }\r\n          100% { left: 100%; }\r\n        }\r\n        \r\n        .card-body {\r\n          background: rgba(20, 20, 20, 0.95);\r\n          padding: 25px;\r\n        }\r\n        \r\n        .top-actions {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 20px;\r\n          padding: 15px;\r\n          background: rgba(30, 30, 30, 0.8);\r\n          border-radius: 10px;\r\n          border: 1px solid rgba(220, 38, 38, 0.3);\r\n          flex-wrap: wrap;\r\n          gap: 10px;\r\n        }\r\n        \r\n        .user-info {\r\n          color: #dc2626;\r\n          font-weight: 600;\r\n        }\r\n        \r\n        .btn-logout, .btn-refresh {\r\n          background: linear-gradient(135deg, #991b1b, #7f1d1d);\r\n          color: white;\r\n          border: none;\r\n          padding: 8px 16px;\r\n          border-radius: 8px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n          transition: all 0.3s ease;\r\n          margin: 0 5px;\r\n        }\r\n        \r\n        .btn-logout:hover, .btn-refresh:hover {\r\n          background: linear-gradient(135deg, #7f1d1d, #450a0a);\r\n          transform: translateY(-2px);\r\n        }\r\n        \r\n        .table-container {\r\n          overflow-x: auto;\r\n          border-radius: 10px;\r\n          box-shadow: inset 0 2px 15px rgba(0, 0, 0, 0.4);\r\n        }\r\n        \r\n        .table {\r\n          background: rgba(35, 35, 35, 0.9);\r\n          border-radius: 10px;\r\n          overflow: hidden;\r\n          width: 100%;\r\n          min-width: 1200px;\r\n          font-size: 0.95rem;\r\n          margin-bottom: 0;\r\n        }\r\n        \r\n        .table thead th {\r\n          background: linear-gradient(135deg, #7f1d1d, #991b1b, #dc2626);\r\n          color: #ffffff;\r\n          border: none;\r\n          padding: 18px 12px;\r\n          font-weight: 700;\r\n          text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.8);\r\n          position: relative;\r\n          font-size: 1rem;\r\n          white-space: nowrap;\r\n          text-align: center;\r\n        }\r\n        \r\n        .table thead th::after {\r\n          content: '';\r\n          position: absolute;\r\n          bottom: 0;\r\n          left: 0;\r\n          right: 0;\r\n          height: 3px;\r\n          background: linear-gradient(90deg, #dc2626, #fca5a5, #dc2626);\r\n          opacity: 0.8;\r\n        }\r\n        \r\n        .table tbody tr {\r\n          background: linear-gradient(180deg, rgba(45, 45, 45, 0.9), rgba(35, 35, 35, 0.95));\r\n          transition: all 0.3s ease;\r\n          border-bottom: 1px solid rgba(220, 38, 38, 0.2);\r\n        }\r\n        \r\n        .table tbody tr:hover {\r\n          background: linear-gradient(180deg, rgba(127, 29, 29, 0.4), rgba(153, 27, 27, 0.3));\r\n          transform: scale(1.002);\r\n          box-shadow: 0 4px 20px rgba(220, 38, 38, 0.3);\r\n        }\r\n        \r\n        .table tbody td {\r\n          color: #000000ff;\r\n          border: none;\r\n          padding: 15px 12px;\r\n          vertical-align: middle;\r\n          text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6);\r\n          font-weight: 500;\r\n          font-size: 0.9rem;\r\n          max-width: 150px;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n        \r\n        .table-striped tbody tr:nth-child(odd) {\r\n          background: linear-gradient(180deg, rgba(50, 50, 50, 0.7), rgba(40, 40, 40, 0.8));\r\n        }\r\n        \r\n        /* กำหนดความกว้างของแต่ละคอลัมน์ */\r\n        .col-id { width: 60px; min-width: 60px; }\r\n        .col-name { width: 120px; min-width: 120px; }\r\n        .col-username { width: 110px; min-width: 110px; }\r\n        .col-password { width: 200px; min-width: 200px; }\r\n        .col-address { width: 150px; min-width: 150px; }\r\n        .col-sex { width: 70px; min-width: 70px; }\r\n        .col-birthday { width: 120px; min-width: 120px; }\r\n        .col-action { width: 90px; min-width: 90px; }\r\n        \r\n        .btn {\r\n          border: none;\r\n          padding: 10px 16px;\r\n          border-radius: 8px;\r\n          font-weight: 600;\r\n          transition: all 0.3s ease;\r\n          text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6);\r\n          position: relative;\r\n          overflow: hidden;\r\n          font-size: 0.85rem;\r\n          margin: 2px;\r\n          cursor: pointer;\r\n          text-decoration: none;\r\n          display: inline-block;\r\n        }\r\n        \r\n        .btn::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: -100%;\r\n          width: 100%;\r\n          height: 100%;\r\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\r\n          transition: left 0.5s;\r\n        }\r\n        \r\n        .btn:hover::before {\r\n          left: 100%;\r\n        }\r\n        \r\n        .btn-warning {\r\n          background: linear-gradient(135deg, #f59e0b, #d97706);\r\n          color: white;\r\n          box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);\r\n        }\r\n        \r\n        .btn-warning:hover {\r\n          background: linear-gradient(135deg, #d97706, #b45309);\r\n          box-shadow: 0 6px 20px rgba(245, 158, 11, 0.6);\r\n          transform: translateY(-2px);\r\n          color: white;\r\n          text-decoration: none;\r\n        }\r\n        \r\n        .btn-danger {\r\n          background: linear-gradient(135deg, #dc2626, #991b1b);\r\n          color: white;\r\n          box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);\r\n        }\r\n        \r\n        .btn-danger:hover {\r\n          background: linear-gradient(135deg, #991b1b, #7f1d1d);\r\n          box-shadow: 0 6px 20px rgba(220, 38, 38, 0.6);\r\n          transform: translateY(-2px);\r\n        }\r\n        \r\n        .text-center {\r\n          text-align: center;\r\n          font-weight: 700;\r\n        }\r\n        \r\n        .empty-state {\r\n          text-align: center;\r\n          padding: 60px 20px;\r\n          color: rgba(255, 255, 255, 0.7);\r\n        }\r\n        \r\n        .empty-state h3 {\r\n          color: #dc2626;\r\n          margin-bottom: 10px;\r\n        }\r\n        \r\n        .status-bar {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-top: 15px;\r\n          padding: 10px;\r\n          background: rgba(30, 30, 30, 0.6);\r\n          borderRadius: 8px;\r\n          fontSize: 0.85rem;\r\n          color: rgba(255, 255, 255, 0.7);\r\n          flex-wrap: wrap;\r\n          gap: 10px;\r\n        }\r\n        \r\n        .error-message {\r\n          background: rgba(255, 107, 107, 0.1);\r\n          border: 1px solid rgba(255, 107, 107, 0.3);\r\n          color: #ff6b6b;\r\n          padding: 15px;\r\n          border-radius: 8px;\r\n          margin: 15px 0;\r\n          text-align: center;\r\n        }\r\n        \r\n        /* ปรับแต่ง Scrollbar */\r\n        ::-webkit-scrollbar {\r\n          width: 12px;\r\n          height: 12px;\r\n        }\r\n        \r\n        ::-webkit-scrollbar-track {\r\n          background: rgba(30, 30, 30, 0.8);\r\n          border-radius: 6px;\r\n        }\r\n        \r\n        ::-webkit-scrollbar-thumb {\r\n          background: linear-gradient(45deg, #dc2626, #991b1b);\r\n          border-radius: 6px;\r\n          border: 2px solid rgba(30, 30, 30, 0.8);\r\n        }\r\n        \r\n        ::-webkit-scrollbar-thumb:hover {\r\n          background: linear-gradient(45deg, #991b1b, #7f1d1d);\r\n        }\r\n        \r\n        /* เพิ่ม glow effects */\r\n        .card {\r\n          position: relative;\r\n        }\r\n        \r\n        .card::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: -3px;\r\n          left: -3px;\r\n          right: -3px;\r\n          bottom: -3px;\r\n          background: linear-gradient(45deg, #dc2626, transparent, #dc2626, transparent, #dc2626);\r\n          border-radius: 18px;\r\n          z-index: -1;\r\n          opacity: 0.6;\r\n          filter: blur(2px);\r\n        }\r\n        \r\n        /* Responsive adjustments */\r\n        @media (max-width: 768px) {\r\n          .container {\r\n            padding: 15px;\r\n          }\r\n          \r\n          .table {\r\n            font-size: 0.8rem;\r\n          }\r\n          \r\n          .btn {\r\n            padding: 8px 12px;\r\n            font-size: 0.75rem;\r\n          }\r\n          \r\n          .top-actions {\r\n            flex-direction: column;\r\n            text-align: center;\r\n          }\r\n          \r\n          .status-bar {\r\n            flex-direction: column;\r\n            text-align: center;\r\n          }\r\n        }\r\n      `}</style>\r\n      \r\n      <br /><br /><br /><br />\r\n      <div className=\"container\">\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            Users Management System\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"top-actions\">\r\n              <div className=\"user-info\">\r\n                Welcome, Admin! ({items.length} users found)\r\n              </div>\r\n              <div>\r\n                <button \r\n                  className=\"btn-refresh\"\r\n                  onClick={() => fetchUsers(true)}\r\n                >\r\n                  🔄 Refresh\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {error && (\r\n              <div className=\"error-message\">\r\n                ⚠️ {error}\r\n                <br />\r\n                <button \r\n                  className=\"btn btn-warning\"\r\n                  onClick={() => fetchUsers(true)}\r\n                  style={{ marginTop: '10px' }}\r\n                >\r\n                  🔄 Try Again\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {items.length === 0 && !error ? (\r\n              <div className=\"empty-state\">\r\n                <h3>No Users Found</h3>\r\n                <p>There are no users in the system yet, or data is still loading.</p>\r\n                <button \r\n                  className=\"btn btn-warning\"\r\n                  onClick={() => fetchUsers(true)}\r\n                  style={{ marginTop: '10px' }}\r\n                >\r\n                  🔄 Load Data\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"table-container\">\r\n                <table className=\"table table-striped table-hover\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th className=\"col-id text-center\">Nunber</th>\r\n                      <th className=\"col-name\">Firstname</th>\r\n                      <th className=\"col-name\">Fullname</th>\r\n                      <th className=\"col-name\">Lastname</th>\r\n                      <th className=\"col-username\">Username</th>\r\n                      <th className=\"col-password\">Password</th>\r\n                      <th className=\"col-address\">Address</th>\r\n                      <th className=\"col-sex\">Sex</th>\r\n                      <th className=\"col-birthday\">Birthday</th>\r\n                      <th className=\"col-action\">Edit</th>\r\n                      <th className=\"col-action\">Delete</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {items.map((item, index) => (\r\n                      <tr key={item.id || index}>\r\n                        <td className=\"text-center\">{item.id || index + 1}</td>\r\n                        <td title={item.firstname || '-'}>{item.firstname || '-'}</td>\r\n                        <td title={item.fullname || '-'}>{item.fullname || '-'}</td>\r\n                        <td title={item.lastname || '-'}>{item.lastname || '-'}</td>\r\n                        <td title={item.username || '-'}>{item.username || '-'}</td>\r\n                        <td title={item.password || '-'}>\r\n                          {item.password ? '••••••••••••' : '-'}\r\n                        </td>\r\n                        <td title={item.address || '-'}>{item.address || '-'}</td>\r\n                        <td className=\"text-center\">{item.sex || '-'}</td>\r\n                        <td>{item.birthday || '-'}</td>\r\n                        <td>\r\n                          <Link href={`/admin/users/edit/${item.id || index}`} className=\"btn btn-warning\">\r\n                            Edit\r\n                          </Link>\r\n                        </td>\r\n                        <td>\r\n                          <button \r\n                            className=\"btn btn-danger\" \r\n                            type=\"button\" \r\n                            onClick={() => handleDelete(item.id || index)}\r\n                          >\r\n                            <i className=\"fa fa-trash\"></i> Del\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Status Bar */}\r\n            <div className=\"status-bar\">\r\n              <span>\r\n                Connection: {typeof navigator !== 'undefined' && navigator.onLine ? '🟢 Online' : '🔴 Offline'}\r\n              </span>\r\n              <span>\r\n                Last updated: {lastUpdate ? lastUpdate.toLocaleTimeString() : 'Never'}\r\n              </span>\r\n              <span>\r\n                Auto-refresh: ⚡ Every 15 seconds\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br /><br />\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}